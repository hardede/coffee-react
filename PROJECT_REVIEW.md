# Project review (coffee-react)

## Что уже исправлено в этом коммите

1. Исправлена логика добавления заказов в `App`: теперь массив заказов обновляется корректно (`setOrders([...orders, ...items])`), а не через невалидный вызов `setOrders(...orders, obj)`.
2. Удалены отладочные `console.log` в ключевых местах (`App`, `Orders`).
3. Исправлен потенциальный крэш при удалении товара из корзины, когда `localStorage.cart` пустой (`|| []`).
4. Убрано обновление state в рендере карточки товара (антипаттерн). Ограничения количества перенесены в обработчики `increment/decrement`.
5. Исправлен подсчет цен в `useCard`: теперь используется корректное суммирование через `reduce((sum, item) => sum + ...)`.

## Что еще стоит улучшить

### High priority

1. **Заменить `node-sass` на `sass`**
   - Сейчас проект не собирается в текущем окружении Node из-за бинарной несовместимости `node-sass`.
   - Рекомендация: удалить `node-sass`, установить `sass`, проверить импорт SCSS и сборку.

2. **Исправить компонент `Scrollable`**
   - Есть отладочный лог.
   - Используется `e.scrollX` вместо `e.clientX` в `onMouseDown`.
   - `useEffect` без массива зависимостей повторно навешивает document listeners на каждом рендере.
   - Рекомендация: стабилизировать обработчики через `useCallback`, корректно управлять listener lifecycle.

### Medium priority

3. **Убрать дублирование вычислений стоимости**
   - `cardPrice` и `totalPrice` фактически вычисляют одно и то же.
   - Рекомендация: оставить один источник значения или развести доменные смыслы.

4. **Именование хука `useCard`**
   - По смыслу это `useCart`; текущее имя сбивает с толку.

5. **Повысить надежность хранения данных в LocalStorage**
   - Добавить безопасный парсер (`try/catch`) для JSON и версионирование структуры данных.

### Low priority

6. **Добавить тесты на критическую бизнес-логику**
   - Добавление товара в корзину.
   - Подсчет total.
   - Перенос корзины в заказы после оформления.

7. **Привести проект к единым стилевым правилам**
   - `var` -> `const/let`.
   - Выравнивание форматирования и имен файлов (`PostRivews` typo).

